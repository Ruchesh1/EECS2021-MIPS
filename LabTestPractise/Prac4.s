#################################################################
#								#
#			Prac4.s (Third.java)			#
#								#
#################################################################

		.text

main:
	#-----------------------------------------------------------
		sw	$ra, 0($sp)
		addi	$sp, $sp, -4	#push ra
	#-----------------------------------------------------------
		addi	$v0, $0, 5
		syscall
		add	$a0, $0, $v0
		addi 	$a1, $0, 350
		addi 	$t0, $0, 500
		sle 	$t5, $t0, $a0
		beq	$t5, $0, skip
		jal 	div4
		add	$a0, $0, $v0
		addi 	$v0, $0, 1
		syscall
		j 	done
		
	skip:
		jal 	gcd
		add 	$a0, $0, $v0
		addi 	$v0, $0, 1
		syscall
	 	
	done:
	#------------------------------------------------------------
		addi	$sp, $sp, 4
		lw	$ra, 0($sp)	#pop ra
	#------------------------------------------------------------
		jr 	$ra
#--------------------------------------------------------------------

div4:	

		add 	$v0, $0, $0
		andi	$t0, $a0, 3
		beq	$t0, $0, goto
		jr 	$ra
	goto:	
		addi 	$v0, $0, 1
		jr 	$ra
#---------------------------------------------------------------------
gcd:
	#-----------------------------------------------------------
		sw	$ra, 0($sp)
		addi	$sp, $sp, -4	#push ra
	#-----------------------------------------------------------
		add 	$v0, $0, $0
		beq 	$a1, $0, gt
		add	$t0, $0, $a0
		add	$t1, $0, $a1
		div 	$t0, $t1
		mfhi 	$t3
		add	$a0, $0, $t1
		add	$a1, $0, $t3
	
		jal	gcd

		j	comp
	gt:
		add	$v0, $0, $a0
	
	comp:	
	#------------------------------------------------------------
		addi	$sp, $sp, 4
		lw	$ra, 0($sp)	#pop ra
	#------------------------------------------------------------
		jr 	$ra
