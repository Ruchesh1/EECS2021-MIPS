#################################################################
#								#
#			Prac2.s					#
#								#
#################################################################
		.text
main:
	
	#-----------------------------------------------------------
		sw	$ra, 0($sp)
		addi	$sp, $sp, -4	#push ra
	#-----------------------------------------------------------
		
		addi	$v0, $0, 5
		syscall
		add	$a0, $0, $v0	#x = user input

		addi 	$a1, $0, 55	#n = 55

		slt 	$t5, $a0,$0	#x< 0
		beq	$t5, $0, gt 	# go to gt
		jal compute		#call compute method
		add 	$a0, $0, $v0	#save  result in a0
		addi 	$v0, $0, 1	# print it
		syscall	
		j done
		
	gt:
		
		jal rom
		add 	$a0, $0, $v0
		addi 	$v0, $0, 1
		syscall
				
		
done: 	
	#------------------------------------------------------------
		addi	$sp, $sp, 4
		lw	$ra, 0($sp)	#pop ra
	#------------------------------------------------------------
		jr $ra

#------------------------methods------------------------------------
	
compute:
	
		sub	$a1, $0, $a1	# -b
		div	$a0, $a1	# a%b
		mfhi	$a0		# t1 = a%b
		
		sub 	$v0, $a1, $a0	# v0 = -b - a%b
		jr $ra
#-------------------------------------------------------------------
rom:		
		addi	$t1, $0, 1	# saving 1 to temp $t1
		sle	$t9, $a0, $t1	# comparing wheather a<=1
		beq	$t9, $0, goto 	# if t9 not equal 0 then goto
		add	$t0, $0, $a0	# result = a
		add	$v0, $0, $t0	# result  = a
		jr $ra

	goto:

	#-------------------------------------------------------------
		sw	$ra, 0($sp)
		addi	$sp, $sp, -4	#push ra
	#------------------------------------------------------------
		
	#-------------------------------------------------------------
		sw 	$a0, 0($sp)
		addi 	$sp, $sp, -4
	#-------------------------------------------------------------	
		
		sub 	$a0, $a0, $t1	# a = a-1
	
		jal rom
		
	#-------------------------------------------------------------
		addi	$sp, $sp, 4
		lw	$a0, 0($sp)	#pop a
	#-------------------------------------------------------------	
		mult	$t0, $a0
		mflo	$t0
	#------------------------------------------------------------
		addi	$sp, $sp, 4
		lw	$ra, 0($sp)	#pop sum
	#-------------------------------------------------------------
		
		add	$v0, $0, $t0	# result  = a
		jr 	$ra
